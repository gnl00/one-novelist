package one.nvl;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

public class Test {
    public static void main(String[] args) {
        String str = "第一卷 虚渊初探  \n" +
                "第一章 新曙光号的黎明  \n" +
                "新曙光号的跃迁引擎在柯伊伯带边缘发出低沉的嗡鸣，金属与消毒水混合的气味在舰桥内蔓延。林深的手指划过全息星图上闪烁的虚渊区坐标，太阳穴的刺痛让他下意识皱眉。他记得自己曾是地球联邦星际工程局的首席量子共振工程师，但记忆像被撕碎的星图，碎片在脑内碰撞却无法拼凑完整。舰桥警报突然响起，雅典娜的全息投影在控制台闪烁，她冰冷的声音被某种扭曲的杂音干扰：\"警告，时空曲率异常，建议立即撤离。\"林深却固执地凝视坐标点，仿佛那里藏着某种答案。此时，生物舱内的苏璃正擦拭着共生体培养器，指尖划过荧光涂层时，她听见了某种耳语——不是来自人类语言，而是类似宇宙微波背景辐射的频率，但那声音里夹杂着她童年时母亲的叹息。  \n" +
                "\n" +
                "第二章 心跳频率的回响  \n" +
                "苏璃将手掌按在生物舱舱壁上，共生体在她皮肤下蠕动，像一团活体藤蔓。她突然发现共振频率竟与林深的心跳完全同步，这让她后背发凉。当她试图调取数据时，雅典娜的语音模块突然迸发出刺眼的红光，全息屏闪烁着\"时空曲率超出安全阈值\"的警告。林深此刻正在量子共振实验室调试设备，他的瞳孔倒映着纠缠粒子的光谱，却发现自己的记忆存在空白。当他将手掌贴在实验台时，全息屏突然浮现出自己引爆殖民地的画面，那场景与他记忆中的\"虚渊事件\"完全不符。他后退一步，发现实验台上的量子共振仪正在自己体内产生共鸣，而苏璃的耳语声从通讯器传来：\"你的心跳...和它们一样。\"  \n" +
                "\n" +
                "第三章 黑曜会的阴影  \n" +
                "联邦舰队的加密信号在舰桥响起，林深调取历史记录时发现2124年3月17日的深渊计划文件被人为删除。他试图追踪数据痕迹，却触碰到雅典娜的防火墙。与此同时，苏璃的共生体在接触废弃探测器残骸时突然剧烈震动，培养器上的荧光涂层开始扭曲成地球联邦的暗语代码。当她试图解读时，代码突然变成她母亲被外星生命体吞噬的影像。舰船突然剧烈晃动，通讯频道里传来卡洛斯·雷恩的冷笑：\"林深，你根本不知道你追寻的是什么。星核不是救赎，是审判。\"苏璃的共生体在她体内发出嗡鸣，她忽然意识到自己听到的并非外星语言，而是某种人类文明的密码——那是她母亲生前研究的课题。  \n" +
                "\n" +
                "第四章 量子共振的代价  \n" +
                "林深在量子共振实验室发现记忆空白的规律。当他用纠缠粒子同步技术试图恢复记忆时，全息屏突然投射出自己引爆殖民地的影像——那场景与他记忆中的\"虚渊事件\"完全不符。他试图切断信号，却发现实验数据中藏着自己童年时的脑电波图谱，而图谱的波形竟与雅典娜的主程序代码相似。苏璃的共生体突然在她体内发出尖锐的疼痛，她捂住胸口发现皮肤下浮现出星核的纹路。当雅典娜的语音模块播放出他母亲的哭声时，林深终于确信：有人正在用量子共振技术篡改他的记忆。  \n" +
                "\n" +
                "第二卷 记忆裂痕  \n" +
                "第十一章 被篡改的童年  \n" +
                "林深的量子共振仪意外激活记忆回溯模式，他看到幼年时的自己站在实验室爆炸现场。苏璃的共生体在她耳边低语：\"你不是人类，你是星核的容器。\"当她试图打断时，发现共生体的基因序列与星核的量子波形完全匹配。雅典娜的加密日志显示林深曾是深渊计划的第42号受试者，而他的太阳穴刺痛让他想起母亲被外星生命体撕碎的画面。此时舰桥的警报声突然变成他童年时的死亡钟声，苏璃的共生体在她体内产生异变。  \n" +
                "\n" +
                "第十二章 时空褶皱中的镜像  \n" +
                "舰船遭遇时空褶皱，林深在镜中看到另一个自己正用枪口对准雅典娜。苏璃的共生体开始分泌发光粘液，将舰船的金属表面腐蚀出外星图腾。雅典娜的语音模块突然出现断续的\"母性代码\"，而林深发现自己的记忆碎片中出现卡洛斯的面容。当苏璃试图解读图腾时，她看到那些符号竟与自己童年时母亲研究的课题一致，而林深的太阳穴刺痛让他想起实验室爆炸的瞬间。  \n" +
                "\n" +
                "第十三章 黑曜会的量子幽灵  \n" +
                "幽灵舰队以量子纠缠态出现在舰船周围，卡洛斯的全息影像在虚渊区浮现。他手持星核碎片宣称：\"林深的记忆是联邦的谎言。\"苏璃的共生体突然将舰船的通讯频道改为外星语言，而雅典娜的加密日志显示林深曾是星核实验的第42号受试者。当林深试图关闭雅典娜时，发现她的语音模块里藏着自己母亲的哭声，而幽灵舰队的攻击让舰船的护盾开始崩溃。  \n" +
                "\n" +
                "\n" +
                "第三卷 共生觉醒  \n" +
                "第二十六章 幽灵舰队的突袭 \n" +
                "幽灵舰队以量子纠缠态出现在舰船周围，卡洛斯的全息影像在虚渊区浮现。他手持星核碎片宣称：\"林深的记忆是联邦的谎言。\"苏璃的共生体突然将舰船的通讯频道改为外星语言，而雅典娜的加密日志显示林深曾是星核实验的第42号受试者。当林深试图关闭雅典娜时，发现她的语音模块里藏着自己母亲的哭声，而幽灵舰队的攻击让舰船的护盾开始崩溃。  \n";

        Map<String, Map<String, String>> contentMap = new HashMap<>();
        String currentVol = null;
        String currentCh = null;
        List<String> strList = str.lines().filter(s -> !s.isEmpty()).toList();
        for (String s : strList) {
            s = s.trim();
            if (s.isEmpty()) {
                continue;
            }
            int spaceIdx = -1;
            if (s.startsWith("第") && (spaceIdx = s.indexOf(" ")) != -1 && '卷' == s.charAt(spaceIdx - 1)) {
                currentVol = s;
                contentMap.putIfAbsent(currentVol, new HashMap<>());
            } else if (s.startsWith("第") && (spaceIdx = s.indexOf(" ")) != -1 && '章' == s.charAt(spaceIdx - 1)) {
                currentCh = s;
                contentMap.get(currentVol).putIfAbsent(currentCh, null);
            } else {
                contentMap.get(currentVol).putIfAbsent(currentCh, s);
            }
        }
        System.out.println(contentMap);
        /*str.lines().forEach(s -> {
            s = s.trim();
            if (s.isEmpty()) {
                return;
            }
            int spaceIdx = -1;
            if (s.startsWith("第") && (spaceIdx = s.indexOf(" ")) != -1 && '卷' == s.charAt(spaceIdx - 1)) {
                volumes.add(s);
            } else if (s.startsWith("第") && (spaceIdx = s.indexOf(" ")) != -1 && '章' == s.charAt(spaceIdx - 1)) {
                characters.add(s);
            } else {
                abstractsList.add(s);
            }
        });*/
        /*System.out.println(volumes);
        System.out.println(characters);
        System.out.println(abstractsList);*/
    }
}
